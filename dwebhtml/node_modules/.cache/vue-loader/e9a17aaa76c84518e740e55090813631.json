{"remainingRequest":"D:\\dewebblog\\dwebhtml\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dewebblog\\dwebhtml\\src\\views\\AddArticle.vue?vue&type=style&index=0&id=cf767762&scoped=true&lang=css&","dependencies":[{"path":"D:\\dewebblog\\dwebhtml\\src\\views\\AddArticle.vue","mtime":1608289432803},{"path":"D:\\dewebblog\\dwebhtml\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dewebblog\\dwebhtml\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\dewebblog\\dwebhtml\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\dewebblog\\dwebhtml\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dewebblog\\dwebhtml\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmR3ZWIgewogICAgLyogaGVpZ2h0OiAyMDBweDsgKi8KICAgIG1pbi1oZWlnaHQ6IDIwMHB4OwogICAgcGFkZGluZzogMjBweCAyMHB4OwogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKfQoKLmR3ZWIgLmVsLWltYWdlOmhvdmVyIHsKICAgIGJvcmRlcjogNXB4IHNvbGlkICNkZjE3MTc7Cn0KCi5kd2ViIC5lbC1pbWFnZS5jb3ZlciB7CiAgICBib3JkZXI6IDVweCBzb2xpZCAjZGYxNzE3Owp9CgouZHdlYiAuZWwtYnV0dG9uIHsKICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgIHJpZ2h0OiAyMHB4OwogICAgbWFyZ2luLXRvcDogMjUwcHg7CiAgICB6LWluZGV4OiAxMDAxOwp9CgouZWwtZm9ybS1pdGVtIHsKICAgIG1hcmdpbi10b3A6IDIycHg7Cn0K"},{"version":3,"sources":["AddArticle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"AddArticle.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div id=\"add-article\">\r\n        <el-row :gutter=\"10\">\r\n            <el-col :xs='24' :lg=\"8\">\r\n                <div class=\"dweb\">\r\n                    <el-form label-width=\"80px\" :model=\"article_info\">\r\n                        <el-form-item label=\"文章标题\">\r\n                            <el-input v-model=\"article_info.title\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"描述\">\r\n                            <el-input  type=\"textarea\" :rows=\"4\" v-model=\"article_info.describe\"></el-input>\r\n                        </el-form-item>\r\n                    </el-form>\r\n                </div>\r\n            </el-col>\r\n            <el-col :xs='24' :lg=\"16\">\r\n                <div class=\"dweb\">\r\n                    <div v-for= \"(img,index) in cover_list\" :key=\"index\">\r\n                        <el-image\r\n                        v-if=\"img == cover_img\"\r\n                        class=\"cover\"\r\n                        style=\"width: 150px; height: 150px\"\r\n                        :src=\"img\"\r\n                        :fit=\"'cover'\"\r\n                        @click=\"chooseCover(img)\"\r\n                        ></el-image>\r\n                        <el-image\r\n                        v-else\r\n                        class=\"\"\r\n                        style=\"width: 150px; height: 150px\"\r\n                        :src=\"img\"\r\n                        :fit=\"'cover'\"\r\n                        @click=\"chooseCover(img)\"\r\n                        ></el-image>\r\n                    </div>\r\n                    <el-button @click=\"submitArticle\" type=\"success\" round>保存文章</el-button>\r\n                </div>\r\n            </el-col>\r\n            <el-col :xs='24' :lg=\"24\">\r\n                <div class=\"dweb\">\r\n                    <div id=\"summernote\"></div>\r\n                </div>\r\n            </el-col>\r\n\r\n        </el-row>\r\n    </div>\r\n</template>\r\n<script>\r\n    import $ from 'jquery';\r\n    import axios from 'axios';\r\n    import Qs from 'qs'\r\n    export default {\r\n        data() {\r\n\r\n            return {\r\n                article_info: {\r\n                    title: '',\r\n                    describe: '',\r\n                    contents: '',\r\n                },\r\n                cover_img: '',\r\n                cover_list: []\r\n            }\r\n        },\r\n        mounted() {\r\n            this.summernote()\r\n\r\n        },\r\n        methods: {\r\n            submitArticle() {\r\n                let article_data = {\r\n                    title: this.article_info.title,\r\n                    describe: this.article_info.describe,\r\n                    content: this.article_info.contents,\r\n                    cover: this.cover_img,\r\n                    token: this.$store.getters.isnotUserlogin\r\n                }\r\n                axios.post('http://127.0.0.1:9000/api/add-article/', Qs.stringify(article_data))\r\n                    .then(res => {\r\n                        console.log(res)\r\n                        if (res.data == 'notitle') {\r\n                            alert('文章标题不能为空')\r\n                            return\r\n                        }\r\n                        if (res.data == 'nologin') {\r\n                            alert('用户信息错误')\r\n                            return\r\n                        }\r\n                        if (res.data == 'ok') {\r\n                            window.location.reload()\r\n                        }\r\n                        \r\n                    })\r\n                    .catch(err => {\r\n                        console.error(err);\r\n                    })\r\n            },\r\n\r\n            summernote() {\r\n                let self = this\r\n                $('#summernote').summernote({\r\n                    width: '100%',\r\n                    height: 500,\r\n                    lang: 'zh-CN',\r\n                    callbacks: {\r\n                        //当输入\r\n                        onChange(contents) {\r\n                            self.article_info.contents = contents\r\n\r\n                        },\r\n                        //本地图片上传\r\n                        onImageUpload(files) {\r\n                            // console.log(files)\r\n                            let img = files[0];\r\n                            let imgData = new FileReader();\r\n                            imgData.readAsDataURL(img);\r\n                            //  console.log(imgData);\r\n                            imgData.onload = function() {\r\n                                //  console.log(imgData.result);\r\n                                //插入图片本身\r\n                                let imgnode = document.createElement('img')\r\n                                imgnode.src = imgData.result\r\n                                $('#summernote').summernote('insertNode', imgnode)\r\n                                    //推入封面待选择\r\n                                self.cover_list.push(imgData.result);\r\n                            };\r\n                        },\r\n                        //远程图片上传\r\n                        onImageLinkInsert(url) {\r\n                            //  console.log(url)\r\n                            let imgnode = document.createElement('img')\r\n                            imgnode.src = url\r\n                                //  console.log(imgnode)\r\n                            $('#summernote').summernote('insertNode', imgnode)\r\n                            self.cover_list.push(url);\r\n                        },\r\n                        //删除媒体文件\r\n                        onMediaDelete(target) {\r\n                            //  console.log(target)\r\n                            let imgData = target[0].src\r\n                            console.log(imgData)\r\n                            for (let i = 0; i < self.cover_list.length; i++) {\r\n                                if (self.cover_list[i] == imgData) {\r\n                                    self.cover_list.splice(i, 1)\r\n                                }\r\n\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            //选择封面\r\n            chooseCover(img) {\r\n                this.cover_img = img\r\n            },\r\n        },\r\n    };\r\n</script>\r\n<style scoped>\r\n    .dweb {\r\n        /* height: 200px; */\r\n        min-height: 200px;\r\n        padding: 20px 20px;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n    \r\n    .dweb .el-image:hover {\r\n        border: 5px solid #df1717;\r\n    }\r\n    \r\n    .dweb .el-image.cover {\r\n        border: 5px solid #df1717;\r\n    }\r\n    \r\n    .dweb .el-button {\r\n        position: fixed;\r\n        right: 20px;\r\n        margin-top: 250px;\r\n        z-index: 1001;\r\n    }\r\n    \r\n    .el-form-item {\r\n        margin-top: 22px;\r\n    }\r\n</style>"]}]}