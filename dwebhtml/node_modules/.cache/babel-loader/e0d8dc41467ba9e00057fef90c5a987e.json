{"remainingRequest":"D:\\dewebblog\\dwebhtml\\node_modules\\babel-loader\\lib\\index.js!D:\\dewebblog\\dwebhtml\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\dewebblog\\dwebhtml\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dewebblog\\dwebhtml\\src\\views\\AddArticle.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\dewebblog\\dwebhtml\\src\\views\\AddArticle.vue","mtime":1608289432803},{"path":"D:\\dewebblog\\dwebhtml\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dewebblog\\dwebhtml\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\dewebblog\\dwebhtml\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dewebblog\\dwebhtml\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IFFzIGZyb20gJ3FzJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhcnRpY2xlX2luZm86IHsKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgZGVzY3JpYmU6ICcnLAogICAgICAgIGNvbnRlbnRzOiAnJwogICAgICB9LAogICAgICBjb3Zlcl9pbWc6ICcnLAogICAgICBjb3Zlcl9saXN0OiBbXQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnN1bW1lcm5vdGUoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdEFydGljbGU6IGZ1bmN0aW9uIHN1Ym1pdEFydGljbGUoKSB7CiAgICAgIHZhciBhcnRpY2xlX2RhdGEgPSB7CiAgICAgICAgdGl0bGU6IHRoaXMuYXJ0aWNsZV9pbmZvLnRpdGxlLAogICAgICAgIGRlc2NyaWJlOiB0aGlzLmFydGljbGVfaW5mby5kZXNjcmliZSwKICAgICAgICBjb250ZW50OiB0aGlzLmFydGljbGVfaW5mby5jb250ZW50cywKICAgICAgICBjb3ZlcjogdGhpcy5jb3Zlcl9pbWcsCiAgICAgICAgdG9rZW46IHRoaXMuJHN0b3JlLmdldHRlcnMuaXNub3RVc2VybG9naW4KICAgICAgfTsKICAgICAgYXhpb3MucG9zdCgnaHR0cDovLzEyNy4wLjAuMTo5MDAwL2FwaS9hZGQtYXJ0aWNsZS8nLCBRcy5zdHJpbmdpZnkoYXJ0aWNsZV9kYXRhKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgaWYgKHJlcy5kYXRhID09ICdub3RpdGxlJykgewogICAgICAgICAgYWxlcnQoJ+aWh+eroOagh+mimOS4jeiDveS4uuepuicpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlcy5kYXRhID09ICdub2xvZ2luJykgewogICAgICAgICAgYWxlcnQoJ+eUqOaIt+S/oeaBr+mUmeivrycpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlcy5kYXRhID09ICdvaycpIHsKICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIHN1bW1lcm5vdGU6IGZ1bmN0aW9uIHN1bW1lcm5vdGUoKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgJCgnI3N1bW1lcm5vdGUnKS5zdW1tZXJub3RlKHsKICAgICAgICB3aWR0aDogJzEwMCUnLAogICAgICAgIGhlaWdodDogNTAwLAogICAgICAgIGxhbmc6ICd6aC1DTicsCiAgICAgICAgY2FsbGJhY2tzOiB7CiAgICAgICAgICAvL+W9k+i+k+WFpQogICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGNvbnRlbnRzKSB7CiAgICAgICAgICAgIHNlbGYuYXJ0aWNsZV9pbmZvLmNvbnRlbnRzID0gY29udGVudHM7CiAgICAgICAgICB9LAogICAgICAgICAgLy/mnKzlnLDlm77niYfkuIrkvKAKICAgICAgICAgIG9uSW1hZ2VVcGxvYWQ6IGZ1bmN0aW9uIG9uSW1hZ2VVcGxvYWQoZmlsZXMpIHsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZmlsZXMpCiAgICAgICAgICAgIHZhciBpbWcgPSBmaWxlc1swXTsKICAgICAgICAgICAgdmFyIGltZ0RhdGEgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICBpbWdEYXRhLnJlYWRBc0RhdGFVUkwoaW1nKTsgLy8gIGNvbnNvbGUubG9nKGltZ0RhdGEpOwoKICAgICAgICAgICAgaW1nRGF0YS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgLy8gIGNvbnNvbGUubG9nKGltZ0RhdGEucmVzdWx0KTsKICAgICAgICAgICAgICAvL+aPkuWFpeWbvueJh+acrOi6qwogICAgICAgICAgICAgIHZhciBpbWdub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7CiAgICAgICAgICAgICAgaW1nbm9kZS5zcmMgPSBpbWdEYXRhLnJlc3VsdDsKICAgICAgICAgICAgICAkKCcjc3VtbWVybm90ZScpLnN1bW1lcm5vdGUoJ2luc2VydE5vZGUnLCBpbWdub2RlKTsgLy/mjqjlhaXlsIHpnaLlvoXpgInmi6kKCiAgICAgICAgICAgICAgc2VsZi5jb3Zlcl9saXN0LnB1c2goaW1nRGF0YS5yZXN1bHQpOwogICAgICAgICAgICB9OwogICAgICAgICAgfSwKICAgICAgICAgIC8v6L+c56iL5Zu+54mH5LiK5LygCiAgICAgICAgICBvbkltYWdlTGlua0luc2VydDogZnVuY3Rpb24gb25JbWFnZUxpbmtJbnNlcnQodXJsKSB7CiAgICAgICAgICAgIC8vICBjb25zb2xlLmxvZyh1cmwpCiAgICAgICAgICAgIHZhciBpbWdub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7CiAgICAgICAgICAgIGltZ25vZGUuc3JjID0gdXJsOyAvLyAgY29uc29sZS5sb2coaW1nbm9kZSkKCiAgICAgICAgICAgICQoJyNzdW1tZXJub3RlJykuc3VtbWVybm90ZSgnaW5zZXJ0Tm9kZScsIGltZ25vZGUpOwogICAgICAgICAgICBzZWxmLmNvdmVyX2xpc3QucHVzaCh1cmwpOwogICAgICAgICAgfSwKICAgICAgICAgIC8v5Yig6Zmk5aqS5L2T5paH5Lu2CiAgICAgICAgICBvbk1lZGlhRGVsZXRlOiBmdW5jdGlvbiBvbk1lZGlhRGVsZXRlKHRhcmdldCkgewogICAgICAgICAgICAvLyAgY29uc29sZS5sb2codGFyZ2V0KQogICAgICAgICAgICB2YXIgaW1nRGF0YSA9IHRhcmdldFswXS5zcmM7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGltZ0RhdGEpOwoKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmNvdmVyX2xpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBpZiAoc2VsZi5jb3Zlcl9saXN0W2ldID09IGltZ0RhdGEpIHsKICAgICAgICAgICAgICAgIHNlbGYuY292ZXJfbGlzdC5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+mAieaLqeWwgemdogogICAgY2hvb3NlQ292ZXI6IGZ1bmN0aW9uIGNob29zZUNvdmVyKGltZykgewogICAgICB0aGlzLmNvdmVyX2ltZyA9IGltZzsKICAgIH0KICB9Cn07"},{"version":3,"sources":["AddArticle.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div id=\"add-article\">\r\n        <el-row :gutter=\"10\">\r\n            <el-col :xs='24' :lg=\"8\">\r\n                <div class=\"dweb\">\r\n                    <el-form label-width=\"80px\" :model=\"article_info\">\r\n                        <el-form-item label=\"文章标题\">\r\n                            <el-input v-model=\"article_info.title\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"描述\">\r\n                            <el-input  type=\"textarea\" :rows=\"4\" v-model=\"article_info.describe\"></el-input>\r\n                        </el-form-item>\r\n                    </el-form>\r\n                </div>\r\n            </el-col>\r\n            <el-col :xs='24' :lg=\"16\">\r\n                <div class=\"dweb\">\r\n                    <div v-for= \"(img,index) in cover_list\" :key=\"index\">\r\n                        <el-image\r\n                        v-if=\"img == cover_img\"\r\n                        class=\"cover\"\r\n                        style=\"width: 150px; height: 150px\"\r\n                        :src=\"img\"\r\n                        :fit=\"'cover'\"\r\n                        @click=\"chooseCover(img)\"\r\n                        ></el-image>\r\n                        <el-image\r\n                        v-else\r\n                        class=\"\"\r\n                        style=\"width: 150px; height: 150px\"\r\n                        :src=\"img\"\r\n                        :fit=\"'cover'\"\r\n                        @click=\"chooseCover(img)\"\r\n                        ></el-image>\r\n                    </div>\r\n                    <el-button @click=\"submitArticle\" type=\"success\" round>保存文章</el-button>\r\n                </div>\r\n            </el-col>\r\n            <el-col :xs='24' :lg=\"24\">\r\n                <div class=\"dweb\">\r\n                    <div id=\"summernote\"></div>\r\n                </div>\r\n            </el-col>\r\n\r\n        </el-row>\r\n    </div>\r\n</template>\r\n<script>\r\n    import $ from 'jquery';\r\n    import axios from 'axios';\r\n    import Qs from 'qs'\r\n    export default {\r\n        data() {\r\n\r\n            return {\r\n                article_info: {\r\n                    title: '',\r\n                    describe: '',\r\n                    contents: '',\r\n                },\r\n                cover_img: '',\r\n                cover_list: []\r\n            }\r\n        },\r\n        mounted() {\r\n            this.summernote()\r\n\r\n        },\r\n        methods: {\r\n            submitArticle() {\r\n                let article_data = {\r\n                    title: this.article_info.title,\r\n                    describe: this.article_info.describe,\r\n                    content: this.article_info.contents,\r\n                    cover: this.cover_img,\r\n                    token: this.$store.getters.isnotUserlogin\r\n                }\r\n                axios.post('http://127.0.0.1:9000/api/add-article/', Qs.stringify(article_data))\r\n                    .then(res => {\r\n                        console.log(res)\r\n                        if (res.data == 'notitle') {\r\n                            alert('文章标题不能为空')\r\n                            return\r\n                        }\r\n                        if (res.data == 'nologin') {\r\n                            alert('用户信息错误')\r\n                            return\r\n                        }\r\n                        if (res.data == 'ok') {\r\n                            window.location.reload()\r\n                        }\r\n                        \r\n                    })\r\n                    .catch(err => {\r\n                        console.error(err);\r\n                    })\r\n            },\r\n\r\n            summernote() {\r\n                let self = this\r\n                $('#summernote').summernote({\r\n                    width: '100%',\r\n                    height: 500,\r\n                    lang: 'zh-CN',\r\n                    callbacks: {\r\n                        //当输入\r\n                        onChange(contents) {\r\n                            self.article_info.contents = contents\r\n\r\n                        },\r\n                        //本地图片上传\r\n                        onImageUpload(files) {\r\n                            // console.log(files)\r\n                            let img = files[0];\r\n                            let imgData = new FileReader();\r\n                            imgData.readAsDataURL(img);\r\n                            //  console.log(imgData);\r\n                            imgData.onload = function() {\r\n                                //  console.log(imgData.result);\r\n                                //插入图片本身\r\n                                let imgnode = document.createElement('img')\r\n                                imgnode.src = imgData.result\r\n                                $('#summernote').summernote('insertNode', imgnode)\r\n                                    //推入封面待选择\r\n                                self.cover_list.push(imgData.result);\r\n                            };\r\n                        },\r\n                        //远程图片上传\r\n                        onImageLinkInsert(url) {\r\n                            //  console.log(url)\r\n                            let imgnode = document.createElement('img')\r\n                            imgnode.src = url\r\n                                //  console.log(imgnode)\r\n                            $('#summernote').summernote('insertNode', imgnode)\r\n                            self.cover_list.push(url);\r\n                        },\r\n                        //删除媒体文件\r\n                        onMediaDelete(target) {\r\n                            //  console.log(target)\r\n                            let imgData = target[0].src\r\n                            console.log(imgData)\r\n                            for (let i = 0; i < self.cover_list.length; i++) {\r\n                                if (self.cover_list[i] == imgData) {\r\n                                    self.cover_list.splice(i, 1)\r\n                                }\r\n\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            //选择封面\r\n            chooseCover(img) {\r\n                this.cover_img = img\r\n            },\r\n        },\r\n    };\r\n</script>\r\n<style scoped>\r\n    .dweb {\r\n        /* height: 200px; */\r\n        min-height: 200px;\r\n        padding: 20px 20px;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n    \r\n    .dweb .el-image:hover {\r\n        border: 5px solid #df1717;\r\n    }\r\n    \r\n    .dweb .el-image.cover {\r\n        border: 5px solid #df1717;\r\n    }\r\n    \r\n    .dweb .el-button {\r\n        position: fixed;\r\n        right: 20px;\r\n        margin-top: 250px;\r\n        z-index: 1001;\r\n    }\r\n    \r\n    .el-form-item {\r\n        margin-top: 22px;\r\n    }\r\n</style>"],"sourceRoot":"src/views"}]}