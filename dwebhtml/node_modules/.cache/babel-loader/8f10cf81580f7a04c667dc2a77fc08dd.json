{"remainingRequest":"D:\\dewebblog\\dwebhtml\\node_modules\\babel-loader\\lib\\index.js!D:\\dewebblog\\dwebhtml\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\dewebblog\\dwebhtml\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dewebblog\\dwebhtml\\src\\views\\ArticleList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\dewebblog\\dwebhtml\\src\\views\\ArticleList.vue","mtime":1608289432807},{"path":"D:\\dewebblog\\dwebhtml\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dewebblog\\dwebhtml\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\dewebblog\\dwebhtml\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dewebblog\\dwebhtml\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IFFzIGZyb20gJ3FzJzsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbJ3NjcmVlbldpZHRoJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICAvL+WIneWni+WcqOmCo+mhtQogICAgICB0b3RhbDogMTAwLAogICAgICAvL+S4gOWFseWkmuWwkemhtQogICAgICBwYWdlU2l6ZTogNCwKICAgICAgLy/kuIDpobXlpJrlsJHmnaEKICAgICAgYXJ0aWNsZV9saXN0OiBbXQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldExpc3REYXRhKHRoaXMuY3VycmVudFBhZ2UpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6Lez6L2s5YaF5a656aG1CiAgICB0b0FydGljbGU6IGZ1bmN0aW9uIHRvQXJ0aWNsZShpZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9hcnRpY2xlJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgaWQ6IGlkCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXRMaXN0RGF0YTogZnVuY3Rpb24gZ2V0TGlzdERhdGEocGFnZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgYXhpb3MoewogICAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgICAgdXJsOiAnaHR0cDovLzEyNy4wLjAuMTo5MDAwL2FwaS9hcnRpY2xlLWxpc3QvJywKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHBhZ2U6IHBhZ2UsCiAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSwKICAgICAgICAgIGxhbm11OiAnYWxsJwogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpCiAgICAgICAgX3RoaXMuYXJ0aWNsZV9saXN0ID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICBfdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsOwogICAgICB9KTsKICAgIH0sCiAgICBjdXJyZW50Q2hhbmdlOiBmdW5jdGlvbiBjdXJyZW50Q2hhbmdlKHZvbCkgewogICAgICAvLyBjb25zb2xlLmxvZygn56ysJyArIHZvbCArICfpobUnKQogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gdm9sOwogICAgICB0aGlzLmdldExpc3REYXRhKHZvbCk7CiAgICB9LAogICAgLy8g5Yig6Zmk5paH56ugCiAgICBkZWxldGVBcnRpY2xlOiBmdW5jdGlvbiBkZWxldGVBcnRpY2xlKGlkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKGNvbmZpcm0oJ+aYr+WQpuehruWumuWIoOmZpCcpKSB7CiAgICAgICAgdmFyIGNoZWNrSW5mbyA9IHsKICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYmxvZ19hcnRpY2xlJywKICAgICAgICAgIHBlcm1pc3Npb25zOiBbJ2RlbGV0ZSddCiAgICAgICAgfTsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiY2hlY2tVc2VyUGVybSIsIGNoZWNrSW5mbykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgIGF4aW9zKHsKICAgICAgICAgICAgICBtZXRob2Q6ICdkZWxldGUnLAogICAgICAgICAgICAgIHVybDogJ2h0dHA6Ly8xMjcuMC4wLjE6OTAwMC9hcGkvZGVsZXRlLWFydGljbGUvJywKICAgICAgICAgICAgICBkYXRhOiBRcy5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgICAgICAgdG9rZW46IF90aGlzMi4kc3RvcmUuZ2V0dGVycy5pc25vdFVzZXJsb2dpbgogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwoKICAgICAgICAgICAgICBpZiAocmVzLmRhdGEgPT0gJ29ubG9naW4nKSB7CiAgICAgICAgICAgICAgICBhbGVydCgn55So5oi355m75b2V5L+h5oGv6ZSZ6K+vJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAocmVzLmRhdGEgPT0gJ25vcGVybScpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCfmnYPpmZDkuI3otrMnKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF90aGlzMi5nZXRMaXN0RGF0YShfdGhpczIuY3VycmVudFBhZ2UpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["ArticleList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,EAAA,MAAA,IAAA;AACA,eAAA;AACA,EAAA,KAAA,EAAA,CAAA,aAAA,CADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,CADA;AACA;AACA,MAAA,KAAA,EAAA,GAFA;AAEA;AACA,MAAA,QAAA,EAAA,CAHA;AAGA;AACA,MAAA,YAAA,EAAA;AAJA,KAAA;AAMA,GATA;AAUA,EAAA,OAVA,qBAUA;AACA,SAAA,WAAA,CAAA,KAAA,WAAA;AACA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,SAFA,qBAEA,EAFA,EAEA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA,UAAA;AAAA,QAAA,KAAA,EAAA;AAAA,UAAA,EAAA,EAAA;AAAA;AAAA,OAAA;AACA,KAJA;AAKA,IAAA,WALA,uBAKA,IALA,EAKA;AAAA;;AACA,MAAA,KAAA,CAAA;AACA,QAAA,MAAA,EAAA,KADA;AAEA,QAAA,GAAA,EAAA,yCAFA;AAGA,QAAA,MAAA,EAAA;AACA,UAAA,IAAA,EAAA,IADA;AAEA,UAAA,QAAA,EAAA,KAAA,QAFA;AAGA,UAAA,KAAA,EAAA;AAHA;AAHA,OAAA,CAAA,CAQA,IARA,CAQA,UAAA,GAAA,EAAA;AACA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,KAAA;AACA,OAZA;AAaA,KAnBA;AAqBA,IAAA,aArBA,yBAqBA,GArBA,EAqBA;AACA;AACA,WAAA,WAAA,GAAA,GAAA;AACA,WAAA,WAAA,CAAA,GAAA;AACA,KAzBA;AA2BA;AACA,IAAA,aA5BA,yBA4BA,EA5BA,EA4BA;AAAA;;AACA,UAAA,OAAA,CAAA,QAAA,CAAA,EAAA;AACA,YAAA,SAAA,GAAA;AACA,UAAA,WAAA,EAAA,cADA;AAEA,UAAA,WAAA,EAAA,CAAA,QAAA;AAFA,SAAA;AAIA,aAAA,MAAA,CAAA,QAAA,CAAA,eAAA,EAAA,SAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA;AACA,cAAA,GAAA,EAAA;AACA,YAAA,KAAA,CAAA;AACA,cAAA,MAAA,EAAA,QADA;AAEA,cAAA,GAAA,EAAA,2CAFA;AAGA,cAAA,IAAA,EAAA,EAAA,CAAA,SAAA,CAAA;AACA,gBAAA,EAAA,EAAA,EADA;AAEA,gBAAA,KAAA,EAAA,MAAA,CAAA,MAAA,CAAA,OAAA,CAAA;AAFA,eAAA,CAHA;AAOA,cAAA,OAAA,EAAA;AACA,gCAAA;AADA;AAPA,aAAA,CAAA,CAUA,IAVA,CAUA,UAAA,GAAA,EAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA;;AACA,kBAAA,GAAA,CAAA,IAAA,IAAA,SAAA,EAAA;AACA,gBAAA,KAAA,CAAA,UAAA,CAAA;AACA;AACA;;AACA,kBAAA,GAAA,CAAA,IAAA,IAAA,QAAA,EAAA;AACA,gBAAA,KAAA,CAAA,MAAA,CAAA;AACA;AACA;;AACA,cAAA,MAAA,CAAA,WAAA,CAAA,MAAA,CAAA,WAAA;AACA,aArBA;AAsBA;AACA,SA1BA;AA4BA;AACA;AA/DA;AAbA,CAAA","sourcesContent":["<template>\r\n    <div id=\"article-list\">\r\n        <div class=\"dweb\">\r\n            <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n                <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n                <el-breadcrumb-item>文章列表</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n        </div>\r\n        <!-- 文章列表 -->\r\n        <div class=\"dweb\" style=\"margin-top:5px\">\r\n            <el-row>\r\n                <el-col v-for=\"item in article_list\" :key=\"item.id\" :span=\"24\">\r\n                    <div class=\"card dweb\">\r\n                        <el-row>\r\n                            <el-col :xs=\"24\" :lg=\"6\">\r\n                                <el-image v-if=\"screenWidth > 500\" style=\"height: 80px\" :src=\"item.cover\"\r\n                                    :fit=\"'cover'\">\r\n                                </el-image>\r\n                                <el-image v-else style=\"width:100%\" :src=\"item.cover\" :fit=\"'cover'\">\r\n                                </el-image>\r\n                            </el-col>\r\n                            <el-col class=\"text-item\" :xs=\"24\" :lg=\"4\">\r\n                                <span>\r\n                                    {{item.title}}\r\n                                </span>\r\n                            </el-col>\r\n                            <el-col class=\"text-item\" :xs=\"12\" :lg=\"7\">\r\n                                <span>\r\n                                    发布者：{{item.nickName}}\r\n                                </span>\r\n                            </el-col>\r\n                            <el-col class=\"text-item\" :xs=\"12\" :lg=\"7\">\r\n                                <el-button @click=\"toArticle(item.id)\" type=\"success\" icon=\"el-icon-search\" circle></el-button>\r\n                                <el-button @click=\"deleteArticle(item.id)\" type=\"danger\" icon=\"el-icon-delete\" circle>\r\n                                </el-button>\r\n                            </el-col>\r\n                        </el-row>\r\n                    </div>\r\n                </el-col>\r\n            </el-row>\r\n        </div>\r\n        <!-- 分页器 -->\r\n        <div class=\"dweb\" style=\"margin-top: 7px;\">\r\n            <el-pagination background layout=\"prev, pager, next\" :total=\"total\" :page-size=\"pageSize\"\r\n                @current-change=\"currentChange\">\r\n            </el-pagination>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import axios from 'axios'\r\n    import Qs from 'qs'\r\n    export default {\r\n        props: ['screenWidth'],\r\n        data() {\r\n            return {\r\n                currentPage: 1, //初始在那页\r\n                total: 100, //一共多少页\r\n                pageSize: 4, //一页多少条\r\n                article_list: []\r\n            }\r\n        },\r\n        mounted() {\r\n            this.getListData(this.currentPage)\r\n        },\r\n        methods: {\r\n            // 跳转内容页\r\n            toArticle(id){\r\n                this.$router.push({path:'/article',query:{id:id}})\r\n            },\r\n            getListData(page) {\r\n                axios({\r\n                    method: 'get',\r\n                    url: 'http://127.0.0.1:9000/api/article-list/',\r\n                    params: {\r\n                        page,\r\n                        pageSize: this.pageSize,\r\n                        lanmu:'all'\r\n                    },\r\n                }).then((res) => {\r\n                    // console.log(res.data)\r\n                    this.article_list = res.data.data\r\n                    this.total = res.data.total\r\n                })\r\n            },\r\n\r\n            currentChange(vol) {\r\n                // console.log('第' + vol + '页')\r\n                this.currentPage = vol\r\n                this.getListData(vol)\r\n            },\r\n\r\n            // 删除文章\r\n            deleteArticle(id) {\r\n                if (confirm('是否确定删除')) {\r\n                    let checkInfo = {\r\n                        contentType: 'blog_article',\r\n                        permissions: ['delete']\r\n                    };\r\n                    this.$store.dispatch(\"checkUserPerm\", checkInfo).then((res) => {\r\n                        // console.log(res)\r\n                        if (res) {\r\n                           axios({\r\n                        method: 'delete',\r\n                        url: 'http://127.0.0.1:9000/api/delete-article/',\r\n                        data: Qs.stringify({\r\n                            id,\r\n                            token: this.$store.getters.isnotUserlogin\r\n                        }),\r\n                        headers: {\r\n                            'Content-Type': \"application/x-www-form-urlencoded\"\r\n                        }\r\n                    }).then((res) => {\r\n                        console.log(res.data)\r\n                        if (res.data == 'onlogin') {\r\n                            alert('用户登录信息错误')\r\n                            return;\r\n                        }\r\n                        if (res.data == 'noperm') {\r\n                            alert('权限不足')\r\n                            return\r\n                        }\r\n                        this.getListData(this.currentPage)\r\n                    });\r\n                        }\r\n                    })\r\n                    \r\n                }\r\n            }\r\n        },\r\n    }\r\n</script>\r\n<style scoped>\r\n    #article-list .dweb {\r\n        padding: 10px 10px;\r\n    }\r\n\r\n    .card.dweb .text-item {\r\n        color: #fff;\r\n        height: 80px;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n</style>"],"sourceRoot":"src/views"}]}