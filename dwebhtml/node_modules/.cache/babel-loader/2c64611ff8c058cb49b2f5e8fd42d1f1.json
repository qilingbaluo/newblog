{"remainingRequest":"D:\\dewebblog\\dwebhtml\\node_modules\\babel-loader\\lib\\index.js!D:\\dewebblog\\dwebhtml\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\dewebblog\\dwebhtml\\src\\store\\index.js","dependencies":[{"path":"D:\\dewebblog\\dwebhtml\\src\\store\\index.js","mtime":1608439733445},{"path":"D:\\dewebblog\\dwebhtml\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dewebblog\\dwebhtml\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\dewebblog\\dwebhtml\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovZGV3ZWJibG9nL2R3ZWJodG1sL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVleCBmcm9tICd2dWV4JzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IFFzIGZyb20gJ3FzJzsKaW1wb3J0IHJvdXRlciBmcm9tICIuLi9yb3V0ZXIiOwpWdWUudXNlKFZ1ZXgpOwpleHBvcnQgZGVmYXVsdCBuZXcgVnVleC5TdG9yZSh7CiAgc3RhdGU6IHsKICAgIHVzZXJpbmZvOiB7fQogIH0sCiAgLy/miYDmnInlhajlsYDnirbmgIHlnKhzdGF0ZeeuoeeQhgogIGdldHRlcnM6IHsKICAgIC8vIOafpeivoueZu+W9leeKtuaAgQogICAgaXNub3RVc2VybG9naW46IGZ1bmN0aW9uIGlzbm90VXNlcmxvZ2luKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS51c2VyaW5mby50b2tlbjsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgLy/kv53lrZjms6jlhoznmbvlvZXnlKjmiLfkv6Hmga8KICAgIHNhdmVVc2VyaW5mbzogZnVuY3Rpb24gc2F2ZVVzZXJpbmZvKHN0YXRlLCB1c2VyaW5mbykgewogICAgICBzdGF0ZS51c2VyaW5mbyA9IHVzZXJpbmZvOwogICAgfSwKICAgIC8vIOa4heepuiDnlKjmiLfnmbvlvZXnirbmgIEKICAgIGNsZWFyVXNlcmluZm86IGZ1bmN0aW9uIGNsZWFyVXNlcmluZm8oc3RhdGUpIHsKICAgICAgc3RhdGUudXNlcmluZm8gPSB7fTsKICAgIH0KICB9LAogIC8v5Y+v5Lul5L+u5pS5c3RhdGXph4znmoTpm4blkIgKICBhY3Rpb25zOiB7CiAgICAvL+aJp+ihjOW8guatpeivt+axggogICAgLy8g55m75b2VCiAgICBibG9nTG9naW46IGZ1bmN0aW9uIGJsb2dMb2dpbihfcmVmLCBmb3JtRGF0YSkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIGF4aW9zKHsKICAgICAgICB1cmw6ICdodHRwOi8vOC4xMzEuMjI1LjEzMTo4MS9hcGkvZHdlYi1sb2dpbi8nLAogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIGRhdGE6IFFzLnN0cmluZ2lmeShmb3JtRGF0YSkKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhID09ICdub25lJykgewogICAgICAgICAgYWxlcnQoJ+eUqOaIt+WQjeS4jeWtmOWcqCcpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlcy5kYXRhID09ICdwd2RlcnInKSB7CiAgICAgICAgICBhbGVydCgn5a+G56CB6ZSZ6K+vJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSkKCgogICAgICAgIGNvbW1pdCgnc2F2ZVVzZXJpbmZvJywgcmVzLmRhdGEpOyAvLyDnvJPlrZgKCiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgcmVzLmRhdGEudG9rZW4pOwogICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGg6ICcvJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDoh6rliqjnmbvlvZUKICAgIHRyeUF1dG9Mb2dpbjogZnVuY3Rpb24gdHJ5QXV0b0xvZ2luKF9yZWYyKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwoKICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgYXhpb3MoewogICAgICAgICAgdXJsOiAnaHR0cDovLzguMTMxLjIyNS4xMzE6ODEvYXBpL2F1dG8tbG9naW4vJywKICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgICAgZGF0YTogUXMuc3RyaW5naWZ5KHsKICAgICAgICAgICAgdG9rZW46IHRva2VuCiAgICAgICAgICB9KQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgaWYgKHJlcy5kYXRhID09ICd0b2tlbnRpbWVvdXQnKSB7CiAgICAgICAgICAgIGFsZXJ0KCfnlKjmiLfkv6Hmga/ov4fmnJ/vvIzph43mlrDnmbvlvZUnKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbW1pdCgnc2F2ZVVzZXJpbmZvJywgcmVzLmRhdGEpOyAvLyDnvJPlrZgKCiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCByZXMuZGF0YS50b2tlbik7CiAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIHBhdGg6ICcvJwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDms6jlhowKICAgIGJsb2dSZWdpc3RlcjogZnVuY3Rpb24gYmxvZ1JlZ2lzdGVyKF9yZWYzLCBmb3JtRGF0YSkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0OwogICAgICBheGlvcyh7CiAgICAgICAgdXJsOiAnaHR0cDovLzguMTMxLjIyNS4xMzE6ODEvYXBpL2R3ZWItcmVnaXN0ZXIvJywKICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICBkYXRhOiBRcy5zdHJpbmdpZnkoZm9ybURhdGEpCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YSA9PSAncmVwZWF0JykgewogICAgICAgICAgYWxlcnQoJ+eUqOaIt+WQjeW3suWtmOWcqCcpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gLy8gY29uc29sZS5sb2cocmVzLmRhdGEpCgoKICAgICAgICBjb21taXQoJ3NhdmVVc2VyaW5mbycsIHJlcy5kYXRhKTsgLy8g57yT5a2YCgogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlcy5kYXRhLnRva2VuKTsKICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAnLycKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g55m75Ye6CiAgICBibG9nTG9nb3V0OiBmdW5jdGlvbiBibG9nTG9nb3V0KF9yZWY0LCB0b2tlbikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgICBjb21taXQoJ2NsZWFyVXNlcmluZm8nKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7IC8vIHJvdXRlci5wdXNoKHtwYXRoOicvJ30pCgogICAgICBheGlvcyh7CiAgICAgICAgdXJsOiAiaHR0cDovLzguMTMxLjIyNS4xMzE6ODEvYXBpL2R3ZWItbG9nb3V0LyIsCiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgZGF0YTogUXMuc3RyaW5naWZ5KHsKICAgICAgICAgIHRva2VuOiB0b2tlbgogICAgICAgIH0pCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5p2D6ZmQ5Yik5patCiAgICBjaGVja1VzZXJQZXJtOiBmdW5jdGlvbiBjaGVja1VzZXJQZXJtKF9yZWY1LCBjaGVja0luZm8pIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZ2V0dGVycywgdG9rZW4sIGNvbnRlbnRUeXBlLCBwZXJtaXNzaW9ucywgcGVybV9kYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGdldHRlcnMgPSBfcmVmNS5nZXR0ZXJzOwogICAgICAgICAgICAgICAgLy/nlKjmiLcKICAgICAgICAgICAgICAgIHRva2VuID0gZ2V0dGVycy5pc25vdFVzZXJsb2dpbjsgLy/ooagKCiAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IGNoZWNrSW5mby5jb250ZW50VHlwZTsgLy/mnYPpmZAKCiAgICAgICAgICAgICAgICBwZXJtaXNzaW9ucyA9IGNoZWNrSW5mby5wZXJtaXNzaW9uczsgLy/pibTmnYPnu5PmnpwKCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcyh7CiAgICAgICAgICAgICAgICAgIHVybDogImh0dHA6Ly84LjEzMS4yMjUuMTMxOjgxL2FwaS9kd2ViLWNoZWNrcGVybS8iLAogICAgICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICAgICAgICAgICAgZGF0YTogUXMuc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICB0b2tlbjogdG9rZW4sCiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGNvbnRlbnRUeXBlLAogICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb25zOiBKU09OLnN0cmluZ2lmeShwZXJtaXNzaW9ucykKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSlzCiAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YSA9PSAnbm9sb2dpbicpIHsKICAgICAgICAgICAgICAgICAgICBwZXJtX2RhdGEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBhbGVydCgn55So5oi35L+h5oGv6ZSZ6K+vJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEgPT0gJ25vcGVybScpIHsKICAgICAgICAgICAgICAgICAgICBwZXJtX2RhdGEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBhbGVydCgn55So5oi35p2D6ZmQ5LiN6Laz77yM6IGU57O7566h55CG5ZGYJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEgPT0gIm9rIikgewogICAgICAgICAgICAgICAgICAgIHBlcm1fZGF0YSA9IHRydWU7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBwZXJtX2RhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBtb2R1bGVzOiB7fQp9KTs="},{"version":3,"sources":["D:/dewebblog/dwebhtml/src/store/index.js"],"names":["Vue","Vuex","axios","Qs","router","use","Store","state","userinfo","getters","isnotUserlogin","token","mutations","saveUserinfo","clearUserinfo","actions","blogLogin","formData","commit","url","method","data","stringify","then","res","alert","localStorage","setItem","push","path","tryAutoLogin","getItem","blogRegister","blogLogout","removeItem","console","log","checkUserPerm","checkInfo","contentType","permissions","JSON","perm_data","modules"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport axios from 'axios'\r\nimport Qs from 'qs'\r\nimport router from \"../router\"\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n  state: {\r\n    userinfo: {}\r\n  },//所有全局状态在state管理\r\n  getters: {\r\n    // 查询登录状态\r\n    isnotUserlogin(state) {\r\n      return state.userinfo.token\r\n    }\r\n  },\r\n  mutations: {\r\n    //保存注册登录用户信息\r\n    saveUserinfo(state, userinfo) {\r\n      state.userinfo = userinfo\r\n    },\r\n    // 清空 用户登录状态\r\n    clearUserinfo(state) {\r\n      state.userinfo = {}\r\n    }\r\n  },//可以修改state里的集合\r\n  actions: {\r\n    //执行异步请求\r\n    // 登录\r\n    blogLogin({ commit }, formData) {\r\n      axios({\r\n        url: 'http://8.131.225.131:81/api/dweb-login/',\r\n        method: 'post',\r\n        data: Qs.stringify(formData)\r\n      }).then((res) => {\r\n        if (res.data == 'none') {\r\n          alert('用户名不存在')\r\n          return\r\n        }\r\n        if (res.data == 'pwderr') {\r\n          alert('密码错误')\r\n          return\r\n        }\r\n        // console.log(res.data)\r\n        commit('saveUserinfo', res.data)\r\n        // 缓存\r\n        localStorage.setItem('token', res.data.token)\r\n        router.push({ path: '/' })\r\n      });\r\n    },\r\n    // 自动登录\r\n    tryAutoLogin({commit}) {\r\n      let token = localStorage.getItem('token')\r\n      if (token) {\r\n        axios({\r\n          url: 'http://8.131.225.131:81/api/auto-login/',\r\n          method: 'post',\r\n          data: Qs.stringify({ token }),\r\n        }).then((res) => {\r\n          // console.log(res.data);\r\n          if (res.data== 'tokentimeout') {\r\n            alert('用户信息过期，重新登录')\r\n            return\r\n          }\r\n          commit('saveUserinfo', res.data)\r\n          // 缓存\r\n        localStorage.setItem('token', res.data.token)\r\n        router.push({ path: '/' })\r\n        })\r\n      }\r\n    },\r\n\r\n    // 注册\r\n    blogRegister({ commit }, formData) {\r\n      axios({\r\n        url: 'http://8.131.225.131:81/api/dweb-register/',\r\n        method: 'post',\r\n        data: Qs.stringify(formData)\r\n      }).then((res) => {\r\n        if (res.data == 'repeat') {\r\n          alert('用户名已存在')\r\n          return\r\n        }\r\n        // console.log(res.data)\r\n        commit('saveUserinfo', res.data)\r\n        // 缓存\r\n        localStorage.setItem('token', res.data.token)\r\n        router.push({ path: '/' })\r\n      })\r\n    },\r\n\r\n    // 登出\r\n    blogLogout({commit},token){\r\n      commit('clearUserinfo')\r\n      localStorage.removeItem('token')\r\n      // router.push({path:'/'})\r\n      axios({\r\n        url:\"http://8.131.225.131:81/api/dweb-logout/\",\r\n        method:'post',\r\n        data:Qs.stringify({token})\r\n      }).then((res)=>{\r\n        console.log(res.data)\r\n      })\r\n    },\r\n\r\n    // 权限判断\r\n    async checkUserPerm({getters},checkInfo){\r\n      //用户\r\n      let token = getters.isnotUserlogin\r\n      //表\r\n      let contentType = checkInfo.contentType\r\n      //权限\r\n      let permissions = checkInfo.permissions\r\n      //鉴权结果\r\n      let perm_data;\r\n      await axios({\r\n        url:\"http://8.131.225.131:81/api/dweb-checkperm/\",\r\n        method:'post',\r\n        data:Qs.stringify({\r\n          token,\r\n          contentType,\r\n          permissions:JSON.stringify(permissions)\r\n        })\r\n      }).then((res)=>{\r\n        // console.log(res.data)s\r\n        if (res.data == 'nologin') {\r\n          perm_data = false\r\n          alert('用户信息错误')\r\n          return\r\n        }\r\n        if (res.data == 'noperm') {\r\n          perm_data = false\r\n          alert('用户权限不足，联系管理员')\r\n          return\r\n        }\r\n        if (res.data == \"ok\") {\r\n          perm_data = true\r\n        }\r\n      })\r\n      return perm_data\r\n    }\r\n    },\r\n  modules: {},\r\n});"]}]}